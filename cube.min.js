!function(){"use strict";var a,b;a={animationFrame:function(){return!!window.requestAnimationFrame},css3d:function(){function a(){for(e=0,f=k.length;f>e;e+=1)if(k[e].length>0){if(void 0!==j[k[e]+"TransformStyle"]&&(j[k[e]+"TransformStyle"]="preserve-3d",j[k[e]+"TransformStyle"].length>0))return j[k[e]+"TransformStyle"]="",!0}else if(void 0!==j.transformStyle&&(j.transformStyle="preserve-3d",j.transformStyle.length>0))return j.transformStyle="",!0;return!1}if(void 0===document.querySelector)return!1;var b,c,d,e,f,g="temporaryCubeCSS3dElement",h="temporaryCubeCSS3dStyle",i=document.body,j=document.documentElement.style,k=["webkit","moz","ms",""];return d=a(),d&&void 0!==j.webkitPerspective&&(c=document.createElement("style"),b=document.createElement("div"),c.id=h,b.id=g,i.appendChild(c),i.appendChild(b),c.textContent=["@media (transform-3d), (-webkit-transform-3d) {","    #"+g+"{","       left: 9px;","       position: absolute;","       height: 5px;","       margin: 0;","       padding: 0;","       border: 0","   }","}"].join("\n"),d=9===b.offsetLeft&&5===b.offsetHeight,i.removeChild(c),i.removeChild(b)),d}},a.animationFrame()&&a.css3d()&&(document.documentElement.className+=" cube-3d-available"),b=function(c,d){return a.animationFrame()&&a.css3d()?new b.instance(c,d||{}):{applyRotation:function(){return!1},rotate:function(){return!1},focusOn:function(){return!1},spinTo:function(){return!1}}},window.Cube=b,b.instance=function(a,b){b.perspective=b.perspective||1100,this.$cube=document.querySelector(a||"#robot-cube"),this.props=b,this.rotatePropsSet=!1,this.rotateDir="right",this.speedX=0,this.speedY=0,this.speedZ=0,this.posX=0,this.posY=0,this.posZ=0,this.snapshotX=0,this.snapshotY=0,this.snapshotZ=0,this.isRotating=!1,this.isFocusing=!1,this.hasFocused=!1,this.iterators={},this.timers={}},b.instance.prototype={xyz:["x","y","z"],XYZ:["X","Y","Z"],sides:{"side-1":[0,90,0],"side-2":[90,0,0],"side-3":[0,0,0],"side-4":[270,0,0],"side-5":[0,270,0],"side-6":[0,180,0]},applyRotation:function(a){var b,c=this._getPrefix(),d="perspective("+this.props.perspective+"px)",e=0;if(a)for(;3>e;)b=a[this.xyz[e]],b=isNaN(b)?0:b,this["pos"+this.XYZ[e]]=b,e+=1;for(e=0;3>e;)b=this["pos"+this.XYZ[e]],d+=" rotate"+this.XYZ[e]+"("+b+"deg)",e+=1;this.$cube.style[c?c+"Transform":"transform"]=d},rotate:function(a){var b,c=0,d=0,e=this.XYZ,f=this;if(a=a||{},f.isRotating=!0,a.startSide&&void 0===f.sides[a.startSide])throw'You\'ve typed wrong value for "startSide" option.';if(f.isFocusing=!1,!f.rotatePropsSet){for(;3>c;)a.startSide&&(a["start"+e[c]]=f.sides[a.startSide][c]),f["pos"+e[c]]=a["start"+e[c]]||0,b=a["speed"+e[c]],b=0===b?0:b||360,f["speed"+e[c]]=b,c+=1;f.rotateDir=a.rotateDir||f.rotateDir,f.rotatePropsSet=!0}"left"===f.rotateDir&&(d=-360),"right"===f.rotateDir&&(d=360),f._spinTo({spinToX:a.startX?a.startX+d:d,spinToY:a.startY?a.startY+d:d,spinToZ:a.startZ?a.startZ+d:d,speedX:f.speedX,speedY:f.speedY,speedZ:f.speedZ,timer:"rotate",repeat:!0,easing:"linear"})},focusOn:function(a){function b(){if(a.bounceBack&&cancelAnimationFrame(d.timers.deFocus),d.isFocusing||(d.snapshotX=d.posX,d.snapshotY=d.posY,d.snapshotZ=d.posZ),a.spinTo&&void 0===d.sides[a.spinTo])throw'You\'ve typed wrong value for "spinTo" option.';a.spinTo&&void 0!==d.sides[a.spinTo]&&(a.spinToX=d.sides[a.spinTo][0],a.spinToY=d.sides[a.spinTo][1],a.spinToZ=d.sides[a.spinTo][2]),d._spinTo({spinToX:a.spinToX||0,spinToY:a.spinToY||0,spinToZ:a.spinToZ||0,speed:a.speed||2e3,timer:"spinTo",easing:"out",callback:function(){d.$cube.className+=" focused",d.hasFocused=!0}})}function c(){cancelAnimationFrame(d.timers.spinTo),cancelAnimationFrame(d.timers.rotate),d._removeClass(d.$cube,"focused"),d.hasFocused=!1,a.bounceBack?d._spinTo({spinToX:d.snapshotX,spinToY:d.snapshotY,spinToZ:d.snapshotZ,speed:a.speed||2e3,timer:"deFocus",easing:"out",callback:function(){d.isRotating&&d.rotate({startX:d.posX,startY:d.posY,startZ:d.posZ})}}):d.isRotating&&d.rotate({startX:d.posX,startY:d.posY,startZ:d.posZ})}var d=this,e=null===window.ontouchstart,f=e?"touchstart":"mouseover";a=a||{},d.$cube.addEventListener(f,function(a){d.hasFocused||(a.preventDefault(),cancelAnimationFrame(d.timers.rotate),b())}),d.$cube.addEventListener("mouseout",c),e&&document.addEventListener("touchstart",function(a){var b=a.target;d._hasParent(b,d.$cube)||c()})},_spinTo:function(a){function b(){for(g=0;3>g;)c=k[p[g]],e=a.speed?j[0]:a["speed"+q[g]],0!==c&&0!==e?(d=h["pos"+q[g]],f=h.iterators.spinTo[p[g]],d=0===e?0:h._ease[a.easing](f,0,c,e),"right"===n[p[g]]?(d+=i[p[g]],c+=i[p[g]],c>d?f+=1:(d=c,o[p[g]]=!0)):(d=i[p[g]]-d,c=i[p[g]]-c,d>c?f+=1:(d=c,o[p[g]]=!0)),h["pos"+q[g]]=d,h.iterators.spinTo[p[g]]=f):o[p[g]]=!0,g+=1;for(h.applyRotation(),g=0;3>g;)o[p[g]]&&a.repeat&&(h["pos"+q[g]]=i[p[g]],h.iterators.spinTo[p[g]]=0,o[p[g]]=!1),g+=1;return o.x&&o.y&&o.z&&!a.repeat?(h.isFocusing=!1,void(a.callback&&a.callback())):void(h.timers[a.timer]=requestAnimationFrame(b))}var c,d,e,f,g=0,h=this,i={},j=[],k={},l={},m={},n={},o={},p=h.xyz,q=h.XYZ;for(a.speed=h._calculateIterations(a.speed),h.isFocusing=a.repeat?!1:!0;3>g;)i[p[g]]=h["pos"+q[g]],a["speed"+q[g]]&&(a["speed"+q[g]]=h._calculateIterations(a["speed"+q[g]])),a.repeat?k[p[g]]=Math.abs(i[p[g]]-a["spinTo"+q[g]]):(l[p[g]]=Math.abs(i[p[g]]-a["spinTo"+q[g]]),m[p[g]]=Math.abs(i[p[g]]-(a["spinTo"+q[g]]>=0?a["spinTo"+q[g]]-360:a["spinTo"+q[g]]+360)),l[p[g]]<m[p[g]]?k[p[g]]=l[p[g]]:(a["spinTo"+q[g]]-=360,k[p[g]]=m[p[g]])),n[p[g]]=i[p[g]]<a["spinTo"+q[g]]?"right":"left",j.push(a.speed?Math.floor(Math.abs(i[p[g]]-a["spinTo"+q[g]])*a.speed/360):a["speed"+q[g]]),g+=1;j.sort(function(a,b){return b-a}),this.iterators.spinTo={x:0,y:0,z:0},a.easing=a.easing||"linear",b()},_ease:{linear:function(a,b,c,d){return c*a/d+b},out:function(a,b,c,d){return a=a/d-1,c*Math.sqrt(1-Math.pow(a,2))+b},inOut:function(a,b,c,d){return c/2*(1-Math.cos(Math.PI*a/d))+b}},_calculateIterations:function(a){return 60*a/1e3},_getPrefix:function(){var a,b=document.documentElement.style;return void 0!==b.webkitTransform&&(a="webkit"),void 0!==b.mozTransform&&(a="moz"),void 0!==b.msTransform&&(a="ms"),a},_hasParent:function(a,b){for(var c=a.parentNode;c!==b&&c!==document;)c=c.parentNode;return c===b?!0:!1},_removeClass:function(a,b){var c=new RegExp("\\b"+b+"\\b","g");a.className=a.className.replace(c,"")}}}();